# JS多线程

## 历史故事

早年间JS被设计成单线程的（这里的单线程指的是单个脚本只能在单个线程/主线程上运行，其他线程都是用来配合主线程的），这是为了简化浏览器而做出的选择，创造者不希望引入锁等一系列复杂的机制。

但是再后来，我们会发现很多的时候IO操作会对单线程的JS造成阻塞，我们去请求五个接口，时间就是五个接口的请求时间的和，而且这个时候CPU是完全空闲的，这是我们绝不期望看到的，于是JS设计者又设计了事件循环机制，用来将等待IO操作的任务先挂起，进行后面的CPU操作，等IO操作结束之后再去将挂起的任务恢复继续进行下去/

再后来多核CPU越来越常见，HTML5提出Web Woker标准，允许JS创建多个线程，但是却收到限制，子线程完全受主线程控制，且不允许进行DOM操作，这一限制可以说让JS的单线程本质保持了下来，所以我们现在仍然可以说JS是一个单线程或者至少说是使用单线程模型的语言。

## 同步任务和异步任务

JS中所有的任务被分为两类：同步任务和异步任务，其中同步任务是在主线程中阻塞执行的任务，他们以一定的顺序排队完成，而异步任务则是在一旁等待同步任务执行完后的任务