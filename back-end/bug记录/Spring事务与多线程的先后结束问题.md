# Spring事务与多线程的先后结束问题

在Spring中，如果你的一个方法被@Transactional标准，则认为这个方法内的操作是一个事务操作，这会导致如果方法中有代码报错，那么会回滚之前的所有数据库操作。

但是这里有一个注意事项——**如果方法return了，那么也会执行提交/回滚**

在同步代码中这自然没有问题，因为一旦方法return了，也就说明这个方法之前的内容全部执行完毕，也就可以提交了。

但是在异步操作中，return就不一定能代表之前的操作全部完成了，因为异步操作和其他的操作是在不同的线程执行的。

然而之前的Spring事务管理仍然会对这个异步方法生效。

这也就导致了如果外界return早于异步操作结束，就会导致异步操作的sql很有可能不会执行。

那么解决方法呢？

