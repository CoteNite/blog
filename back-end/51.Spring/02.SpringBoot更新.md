# SpringBoot更新

:::tip
本文内容会随着SpringBoot的更新而更新
:::

## SpringBoot4

就在不久，SpringBoot4震撼首发，主要的几个更新点在于：

- 全面支持JSpecify，整个系统实现基于JSpecify的空安全
- 全面兼容Java25，与Java始终并肩而行

现在我们一起看看它的几个核心功能更新

## 1.API版本控制

现在我们可以基于API对接口进行版本控制

```kotlin
@RestController  
@RequestMapping  
class HelloWorldController {  
    @GetMapping(value = ["hello"], version = "1", produces = [MediaType.TEXT_PLAIN_VALUE])  
    fun sayHelloV1(): String {  
        return "Hello World"  
    }  
  
    @GetMapping(value = ["hello"],version = "2", produces = [MediaType.TEXT_PLAIN_VALUE])  
    fun sayHelloV2(): String {  
        return "Hi World"  
    }  
}
```

然后通过配置修改如何进行版本的映射

```kotlin
@Configuration  
class ApiConfig : WebMvcConfigurer{  
  
    override fun configureApiVersioning(configurer: ApiVersionConfigurer) {  
        configurer.usePathSegment(1)  
    }  
  
    override fun configurePathMatch(configurer: PathMatchConfigurer) {  
        configurer.addPathPrefix("/api/v{version}", HandlerTypePredicate.forAnnotation(RestController::class.java))  
    }  
  
}
```

现在映射出的API分别是

- `/api/v1/hello`
- `/api/v2/hello`

主流的版本控制有以下几类

- 基于路径的映射（例如/api/v1/hello与/api/v2/hello）
- 基于查询参数（例如/hello?version=1与/hello?version=2）
- 基于请求头（例如X-API-Version: 1与X-API-Version: 2）
- 基于媒体类型标头（例如Accept: application/json; version=1与Accept: application/json; version=2）

我们都可以在WebMvcConfigurer中的configurePathMatch对其进行制作

