# ElasticSearch——数据分析与搜索引擎

我们做项目时经常遇到一个场景，就是如果要实现一个搜索功能该如何办？

一个很自然的想法就是使用MySQL的模糊搜索。

但是模糊搜索存在一个问题，那就是我们的MySQL采用的是正向索引，也就是根据索引进行排序，这时如果我们去根据字符串去搜索一个固定的值，那么可以采用一定的算法，但是如果要查询索引字符串中是否含有某段字符串，那就只能一个个的扫描过去了（效率为O(n)）

这个效率是极其低下的，因此我们必须选择另一种索引的方式

这个时候就出现了倒叙索引

## 倒排索引

倒排索引中存在两个关键的概念

* 文档(Document):用来搜索的数据，一条数据就是一个文档
* 词条(Term):用来搜索文档的数据（使用分词算法进行分词，得到的是又含义的词条）

倒排索引进行了这样的一套操作

1. 文档经过分词算法得到一堆词条（词条与文档是多对多的关系）
2. 创建词条与含有该词条文档id，所在位置等相关信息的表
3. 针对词条创建索引，提高查询词条的效率

然后我们的搜索就变成了

1. 用户输入一段文字
2. 文字分词得到词条
3. 搜索词条
4. 根据词条获取对应的文档id
5. 根据文档id获取文档

这样就大幅的提高了我们模糊搜索的速度

tip：我们可以大致的认为，正向索引适合关系搜索，而倒排索引适合模糊搜索

## 核心定义

这里我们还是和MySQL去对应着理解

* 文档(Document)：类似MySQL中的行，一个文档就是一条完整的数据
* 字段(Field)：类似MySQL中的列，一个文档中含有多个列
* 索引(Index)：类似MySQL中的表，内含许多文档

## DSL 语句

像SQL一样，ElasticSearch有自己的一套语句，我们称之为DSL


